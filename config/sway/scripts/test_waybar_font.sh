#!/bin/bash
# æµ‹è¯• Waybar å­—ä½“åŠ è½½

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "Waybar å­—ä½“åŠ è½½æµ‹è¯•"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""

echo "ğŸ“‹ 1. æ£€æŸ¥ Waybar å½“å‰ä½¿ç”¨çš„å­—ä½“ï¼ˆé€šè¿‡è¿›ç¨‹ç¯å¢ƒï¼‰ï¼š"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
if pgrep -x waybar > /dev/null; then
    PID=$(pgrep -x waybar)
    echo "Waybar PID: $PID"
    # æ£€æŸ¥è¿›ç¨‹çš„ç¯å¢ƒå˜é‡
    echo "å­—ä½“ç›¸å…³ç¯å¢ƒå˜é‡:"
    cat /proc/$PID/environ 2>/dev/null | tr '\0' '\n' | grep -i font || echo "æœªæ‰¾åˆ°å­—ä½“ç¯å¢ƒå˜é‡"
else
    echo "Waybar æœªè¿è¡Œ"
fi
echo ""

echo "ğŸ“‹ 2. æµ‹è¯•å­—ä½“æ˜¯å¦èƒ½æ­£ç¡®æ¸²æŸ“ Nerd Font å›¾æ ‡ï¼š"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
cat > /tmp/font_test.txt << 'EOF'
å¸¸ç”¨ Waybar å›¾æ ‡æµ‹è¯•ï¼š
æ¸©åº¦: ó°”
ç”µæ± : ó°¹ ó°‚†
ç½‘ç»œ: ó°¤¨ ó°¤¯
éŸ³é‡: ó°•¾ ó°•¿ ó°–€ ó°€
éŸ³ä¹: ó°ˆ ó°‰
äº®åº¦: ó°ƒŸ ó°ƒ  ó°ƒ¡
CPU:  ó°›
å†…å­˜: ó°›
æ—¶é’Ÿ: ó°¥”
EOF

echo "ä½¿ç”¨ Hack Nerd Font æ¸²æŸ“:"
FONTCONFIG_FILE=/dev/null FC_DEBUG=0 pango-view --font="Hack Nerd Font 12" /tmp/font_test.txt 2>/dev/null || echo "éœ€è¦å®‰è£… pango-view æˆ–ä½¿ç”¨å…¶ä»–æ–¹æ³•æµ‹è¯•"
echo ""

echo "ğŸ“‹ 3. æ£€æŸ¥ CSS ä¸­çš„å­—ä½“é…ç½®ï¼š"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
if [ -f ~/.config/waybar/style.css ]; then
    echo "å½“å‰ CSS å­—ä½“é…ç½®:"
    grep -A 2 "font-family" ~/.config/waybar/style.css
else
    echo "âŒ æ‰¾ä¸åˆ° style.css"
fi
echo ""

echo "ğŸ“‹ 4. éªŒè¯å­—ä½“åç§°ï¼ˆfc-queryï¼‰ï¼š"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
FONT_FILE=$(fc-match -f '%{file}\n' "Hack Nerd Font")
if [ -n "$FONT_FILE" ] && [ -f "$FONT_FILE" ]; then
    echo "Hack Nerd Font æ–‡ä»¶: $FONT_FILE"
    fc-query "$FONT_FILE" 2>/dev/null | grep -E "family:|fullname:" | head -5
else
    echo "âŒ æ‰¾ä¸åˆ° Hack Nerd Font æ–‡ä»¶"
fi
echo ""

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ’¡ å»ºè®®ï¼š"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "1. ç¡®ä¿å·²é‡æ–°åŠ è½½ Sway é…ç½®ï¼ˆMod+Shift+Cï¼‰"
echo "2. å¦‚æœå›¾æ ‡ä»ä¸æ˜¾ç¤ºï¼Œå°è¯•å®Œå…¨é‡å¯ Waybar:"
echo "   pkill waybar"
echo "   waybar -c ~/.config/waybar/config -s ~/.config/waybar/style.css > /tmp/waybar.log 2>&1 &"
echo "   tail -f /tmp/waybar.log"
echo "3. æ£€æŸ¥ Waybar æ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"

